.. _global-namespace:

Global Namespace
================

.. index:: pair: namespace; global

.. toctree::
	:hidden:

	namespace_xf.rst
	enum_Dirction_QEI.rst
	enum_Encoding_Mode.rst
	enum_FOC_Mode.rst
	struct_AxiParameters_QEI.rst
	struct_RangeDef.rst
	class_RangeTracer.rst
	class_VarRec.rst



Overview
~~~~~~~~



.. _doxid-sin__cos__table_8hpp_1a4f27abd75a3c09281eb0c5625d0f604e:
.. _cid-sin_table:
.. _doxid-sin__cos__table_8hpp_1ae18fc8fee904da0f78031d61dd25d4b2:
.. _cid-cos_table:
.. _doxid-foc_8hpp_1ac0d91b6b18b660ed4d49625c6a2fbace:
.. _cid-ranger:
.. _doxid-foc_8hpp_1acf70e2f51bab60f8bb35ed4b20007e60:
.. _cid-cos_table-2:
.. _doxid-qei_8hpp_1a6c3f9008da58afbbcdb12cd83f07feed:
.. _cid-range_qei_freq:
.. _doxid-qei_8hpp_1a07a50eae34b08ecc911d6c6af2b10b26:
.. _cid-range_qei_cpr:
.. _doxid-common__definitions_8hpp_1a8999d5e3488ff132f2dab6f85ae4e6f7:
.. _cid-angle_generation_inst:
.. _doxid-common__definitions_8hpp_1ad4d9f4bb0bb15cf72b3a4027a21f66f7:
.. _cid-clarke_direct_inst:
.. _doxid-common__definitions_8hpp_1a90f27e74989d504c4dd5b994e9ea84ef:
.. _cid-park_direct_inst:
.. _doxid-common__definitions_8hpp_1a944069503a49f2bd7f8115ae2b6a2261:
.. _cid-park_inverse_inst:
.. _doxid-common__definitions_8hpp_1a2fdef12333ab643ceb110315555fcabc:
.. _cid-clarke_inverse_inst:
.. _doxid-common__definitions_8hpp_1aef0cd18d415390707c7f7038dea06742:
.. _cid-svpwm_inst:
.. _doxid-common__definitions_8hpp_1a281531ed2cca423b8c50fdf3fbd00e34:
.. _cid-demuxer_pi_inst:
.. _doxid-common__definitions_8hpp_1aaded5bb0a4d8096498db638742b6ce69:
.. _cid-ps_iir_filter_inst:
.. _doxid-common__definitions_8hpp_1a2148c4c84006b4fcdbf2fc0be7d957d2:
.. _cid-muxer_pi_inst:
.. _doxid-common__definitions_8hpp_1a9e8c0222048e28443abb8031f2730f2e:
.. _cid-pi_control_inst:
.. _doxid-common__definitions_8hpp_1a25241b8d3eae26e70eac02dd13112caa:
.. _cid-pi_control_stream_inst:
.. _doxid-common__definitions_8hpp_1aa6cf04b9e5a14919af9baad0477bb491:
.. _cid-voltage_modulation_inst:
.. _doxid-common__vars_8hpp_1a4b9dc97759de0da665cf7d807f4d761a:
.. _cid-checkrange:
.. _doxid-common__vars_8hpp_1ad053d7b431437bf27f5b2b4d1a2a159f:
.. _cid-bit_width_accum:
.. _doxid-common__vars_8hpp_1aedae3d01dd29dd8e7e5a3e70d8b1d0ec:
.. _cid-bit_width_data:
.. _doxid-common__vars_8hpp_1a93365c57c3fb62e870175b24429e167c:
.. _cid-bit_width_fractional:
.. _doxid-common__vars_8hpp_1ac28283632abeabe4be6d789c3d0bdef2:
.. _cid-bit_width_log_stream_foc:
.. _doxid-common__vars_8hpp_1afba84af54fda005ecfc9256e19466caa:
.. _cid-bit_width_step_stream:
.. _doxid-common__vars_8hpp_1ae928bae19647310a026a454feca12194:
.. _cid-bit_width_stream_foc:
.. _doxid-common__vars_8hpp_1ac510bb12e5e4f9241aa3f458e94d3da9:
.. _cid-comm_adc_width:
.. _doxid-common__vars_8hpp_1a6f7823bb96da202f15b6232a4d3ac778:
.. _cid-comm_clock_freq:
.. _doxid-common__vars_8hpp_1abaf48a2cca17a96dc4e85299b8a1e3e3:
.. _cid-comm_i:
.. _doxid-common__vars_8hpp_1af8a6c0c21c9cbb80bea7f25390e3c7e0:
.. _cid-comm_macro_ppr:
.. _doxid-common__vars_8hpp_1ab6e44930ebb7fd1cec8717c48cdd04c2:
.. _cid-comm_macro_tlb_lenth:
.. _doxid-common__vars_8hpp_1ae39f7a6d39336a93dbbf749f8e4f763c:
.. _cid-comm_motor_para_dt_sim:
.. _doxid-common__vars_8hpp_1aa5eda9e8382ed09251cad83e9a2a4a32:
.. _cid-comm_motor_para_fai_m:
.. _doxid-common__vars_8hpp_1a1d46fd60fec9952c325a7a5176d9e914:
.. _cid-comm_motor_para_imax:
.. _doxid-common__vars_8hpp_1aa1e21ef1f1d266fc48fbd857d5be1061:
.. _cid-comm_motor_para_j:
.. _doxid-common__vars_8hpp_1a6bf017fa91732c6b1c813e54399877a5:
.. _cid-comm_motor_para_ld:
.. _doxid-common__vars_8hpp_1ac8b7e3a6ec3b7580a6560df81259fb89:
.. _cid-comm_motor_para_rs:
.. _doxid-common__vars_8hpp_1a300b7758c8438e0538a6476ced23fc2a:
.. _cid-comm_motor_para_tl_th:
.. _doxid-common__vars_8hpp_1a706582f08c12918afc1a11c7498848f2:
.. _cid-comm_motor_para_umax:
.. _doxid-common__vars_8hpp_1a77ccf89caa5081d7684a4488c599c9b8:
.. _cid-comm_w:
.. _doxid-common__vars_8hpp_1af6f883e9c3722fef0a4c97e74ef19aad:
.. _cid-max_angle_est_logger:
.. _doxid-common__vars_8hpp_1a54e91d26ad34b7918eeefa3bfaa48724:
.. _cid-max_ialpha_logger:
.. _doxid-common__vars_8hpp_1ab121d495bcca8f5db6016c749e3c9ebe:
.. _cid-max_ia_logger:
.. _doxid-common__vars_8hpp_1a7c19450e7bcf12ac78818757c27ade8c:
.. _cid-max_ibeta_logger:
.. _doxid-common__vars_8hpp_1a2e939dc1e1fd6c63f3fabc5d1748a30a:
.. _cid-max_ib_logger:
.. _doxid-common__vars_8hpp_1a62d6dc7d5cfee5ecc1a3f665b8157f44:
.. _cid-max_id_logger:
.. _doxid-common__vars_8hpp_1a25a09a190a9d4748235a69aa404425d8:
.. _cid-max_iq_logger:
.. _doxid-common__vars_8hpp_1ad3922bd3b249a301d2e6b44abbd9eebd:
.. _cid-max_rpm_logger:
.. _doxid-common__vars_8hpp_1ae1689a5fc34f5ab8d31d964f5ec63f8b:
.. _cid-max_theta_logger:
.. _doxid-common__vars_8hpp_1a305dd225dde3cb5309a6749110c3b1b8:
.. _cid-max_valpha_logger:
.. _doxid-common__vars_8hpp_1abf040a1a08e3d838dbb7b1439e86cd3f:
.. _cid-max_va_logger:
.. _doxid-common__vars_8hpp_1a7a77d366badeb8cb195cdacad1f46010:
.. _cid-max_vbeta_logger:
.. _doxid-common__vars_8hpp_1a23e5f9f4e1082ec13f938c8cd4da636b:
.. _cid-max_vb_logger:
.. _doxid-common__vars_8hpp_1ac084f3fe07710351c81e195f1a365ea0:
.. _cid-max_vc_logger:
.. _doxid-common__vars_8hpp_1a7edcabd0ae4fdead8807664c1fc97cff:
.. _cid-max_vd_logger:
.. _doxid-common__vars_8hpp_1a2a702c912f0d43806acc28d1429f84bc:
.. _cid-max_vq_logger:
.. _doxid-common__vars_8hpp_1ad12215d7d288fcab8082cf6d7d9e6fcc:
.. _cid-min_angle_est_logger:
.. _doxid-common__vars_8hpp_1afc460675ec39fbcb50f99dcfb55ac35c:
.. _cid-min_ialpha_logger:
.. _doxid-common__vars_8hpp_1ae4692565a1c27a0de86f7cf296860c20:
.. _cid-min_ia_logger:
.. _doxid-common__vars_8hpp_1a325db17354af810a85e399a30418b69f:
.. _cid-min_ibeta_logger:
.. _doxid-common__vars_8hpp_1a24effb4063bd85d0dc5f84aaac2c6d36:
.. _cid-min_ib_logger:
.. _doxid-common__vars_8hpp_1a1aaa7e865d79cffc03b0f1b4be6c8f70:
.. _cid-min_id_logger:
.. _doxid-common__vars_8hpp_1a401177145dee4e40a03a7d48d804c9c4:
.. _cid-min_iq_logger:
.. _doxid-common__vars_8hpp_1a90e47b8a69d502b3e880cedc3aac298e:
.. _cid-min_rpm_logger:
.. _doxid-common__vars_8hpp_1affb139b527cd358cbe6105686c039baa:
.. _cid-min_theta_logger:
.. _doxid-common__vars_8hpp_1af404b64ede014d65bce8864d9b7895ef:
.. _cid-min_valpha_logger:
.. _doxid-common__vars_8hpp_1a23fb82d9661720e6f297b42ad7f8101f:
.. _cid-min_va_logger:
.. _doxid-common__vars_8hpp_1a23ef235c5e4c1a4dc1f29d07bf703e37:
.. _cid-min_vbeta_logger:
.. _doxid-common__vars_8hpp_1ac39533b86a52279360eb51a0dbf002c2:
.. _cid-min_vb_logger:
.. _doxid-common__vars_8hpp_1ac3b5c4c40af3947bcf828faf7781dd44:
.. _cid-min_vc_logger:
.. _doxid-common__vars_8hpp_1a45817e9b1284d05d45de481f32e0dc79:
.. _cid-min_vd_logger:
.. _doxid-common__vars_8hpp_1ad60a13a24a359ef43adab4f24671c0f0:
.. _cid-min_vq_logger:
.. _doxid-foc_8hpp_1aa361ed00199d545e61d798f829d7b158:
.. _cid-rangetracer:
.. ref-code-block:: cpp
	:class: overview-code-block

	// namespaces

	namespace :ref:`xf<doxid-namespacexf>`
	    namespace :ref:`xf::motorcontrol<doxid-namespacexf_1_1motorcontrol>`
	        namespace :ref:`xf::motorcontrol::details<doxid-namespacexf_1_1motorcontrol_1_1details>`

	// typedefs

	typedef ap_fixed < (24), (8)> :ref:`t_glb_foc2pwm<doxid-common__vars_8hpp_1a6cf2787b026015774f62b378b2f11147>`
	typedef ap_uint <32> :ref:`t_glb_speed_theta<doxid-common__vars_8hpp_1aad3a4b9bfa5f3e44ca0007956e3c4b3e>`
	typedef ap_fixed <32, 16> :ref:`t_glb_q15q16<doxid-common__vars_8hpp_1a17937afe5326be057eeb68e97ca1fdb4>`
	typedef ap_fixed <32, 1> :ref:`t_glb_smo_time<doxid-common__vars_8hpp_1a3cd174e6491aac08ea226632634d8bf5>`

	// enums

	enum :ref:`Dirction_QEI<doxid-qei_8hpp_1afb9daed2d5861588049366eb0a39955a>`
	enum :ref:`Encoding_Mode<doxid-qei_8hpp_1a93119817305e8990d66633467a1be68e>`
	enum :ref:`FOC_Mode<doxid-common__vars_8hpp_1a7ff933d66137f7ccf1fe08dd1cdc88d2>`

	// structs

	struct :ref:`AxiParameters_QEI<doxid-struct_axi_parameters___q_e_i>` 

	template <class T>
	struct :ref:`RangeDef<doxid-struct_range_def>` 

	// classes

	class :ref:`RangeTracer<doxid-class_range_tracer>` 
	class :ref:`VarRec<doxid-class_var_rec>` 

	// global variables

	static int sin_table[1000]
	static int cos_table[1000]
	:ref:`RangeTracer<doxid-class_range_tracer>` ranger
	static short :ref:`sin_table<doxid-foc_8hpp_1a65d225f3b30cfd94fa26501dc2fcc216>`[(1000)]
	static short cos_table[(1000)]
	static :ref:`RangeDef<doxid-struct_range_def>` <ap_uint <32>> RANGE_qei_freq
	static :ref:`RangeDef<doxid-struct_range_def>` <ap_uint <32>> RANGE_qei_cpr

	// macros

	#define BIT_WIDTH_ACCUM
	#define BIT_WIDTH_DATA
	#define BIT_WIDTH_FRACTIONAL
	#define BIT_WIDTH_LOG_STREAM_FOC
	#define BIT_WIDTH_STEP_STREAM
	#define BIT_WIDTH_STREAM_FOC
	#define COMM_ADC_WIDTH
	#define COMM_CLOCK_FREQ
	#define COMM_I
	#define :ref:`COMM_MACRO_CPR<doxid-common__vars_8hpp_1afea2bed9d9fdec4cb710693e6fe2060c>`
	#define COMM_MACRO_PPR
	#define COMM_MACRO_TLB_LENTH
	#define COMM_MOTOR_PARA_DT_SIM
	#define COMM_MOTOR_PARA_FAI_M
	#define COMM_MOTOR_PARA_IMAX
	#define COMM_MOTOR_PARA_J
	#define COMM_MOTOR_PARA_LD
	#define COMM_MOTOR_PARA_RS
	#define COMM_MOTOR_PARA_TL_TH
	#define COMM_MOTOR_PARA_UMAX
	#define COMM_W
	#define MAX_ANGLE_EST_LOGGER
	#define MAX_IALPHA_LOGGER
	#define MAX_IA_LOGGER
	#define MAX_IBETA_LOGGER
	#define MAX_IB_LOGGER
	#define MAX_ID_LOGGER
	#define MAX_IQ_LOGGER
	#define MAX_RPM_LOGGER
	#define MAX_THETA_LOGGER
	#define MAX_VALPHA_LOGGER
	#define :ref:`MAX_VAL_PWM<doxid-common__vars_8hpp_1a74e343e95f535123648c24acce8c1ecc>`
	#define MAX_VA_LOGGER
	#define MAX_VBETA_LOGGER
	#define MAX_VB_LOGGER
	#define MAX_VC_LOGGER
	#define MAX_VD_LOGGER
	#define MAX_VQ_LOGGER
	#define MIN_ANGLE_EST_LOGGER
	#define MIN_IALPHA_LOGGER
	#define MIN_IA_LOGGER
	#define MIN_IBETA_LOGGER
	#define MIN_IB_LOGGER
	#define MIN_ID_LOGGER
	#define MIN_IQ_LOGGER
	#define MIN_RPM_LOGGER
	#define MIN_THETA_LOGGER
	#define MIN_VALPHA_LOGGER
	#define MIN_VA_LOGGER
	#define MIN_VBETA_LOGGER
	#define MIN_VB_LOGGER
	#define MIN_VC_LOGGER
	#define MIN_VD_LOGGER
	#define MIN_VQ_LOGGER
	#define :ref:`PWM_AP_FIXED_PARA_I2<doxid-common__vars_8hpp_1ac9837ef28b444d636035dd6e684f07ae>`
	#define :ref:`PWM_AP_FIXED_PARA_W2<doxid-common__vars_8hpp_1a633b3f95d557018833d547eddc48b615>`
	#define :ref:`QEI_MAX_NO_EDGE_CYCLE<doxid-qei_8hpp_1a8696e15e85e4dbab2869458a235b2b19>`

	#define RANGETRACER( \
	    n, \
	    v \
	    )

Typedefs
--------

.. _doxid-common__vars_8hpp_1a6cf2787b026015774f62b378b2f11147:
.. _cid-t_glb_foc2pwm:
.. ref-code-block:: cpp
	:class: title-code-block

	typedef ap_fixed < (24), (8)> t_glb_foc2pwm

Data Type for data exchange of Voltage from FOC to SVPWM and Current from ADC to FOC.

.. _doxid-common__vars_8hpp_1aad3a4b9bfa5f3e44ca0007956e3c4b3e:
.. _cid-t_glb_speed_theta:
.. ref-code-block:: cpp
	:class: title-code-block

	typedef ap_uint <32> t_glb_speed_theta

Data Type for the data exchange of the speed and theta from QEI or others.

.. _doxid-common__vars_8hpp_1a17937afe5326be057eeb68e97ca1fdb4:
.. _cid-t_glb_q15q16:
.. ref-code-block:: cpp
	:class: title-code-block

	typedef ap_fixed <32, 16> t_glb_q15q16

Data Type for the data buffer in calculation.

.. _doxid-common__vars_8hpp_1a3cd174e6491aac08ea226632634d8bf5:
.. _cid-t_glb_smo_time:
.. ref-code-block:: cpp
	:class: title-code-block

	typedef ap_fixed <32, 1> t_glb_smo_time

Data Type for the smo discrete sample time.

Global Variables
----------------

.. _doxid-foc_8hpp_1a65d225f3b30cfd94fa26501dc2fcc216:
.. _cid-sin_table-2:
.. ref-code-block:: cpp
	:class: title-code-block

	static short sin_table [(1000)]

Lookup table for the cosine function in the Q16.16 format. CPR(COMM_MACRO_CPR) Number of encoder steps per one full revolution Important: Update this table when the encoder resolution has changed, i.e. when #CPR has changed.


Global Functions
~~~~~~~~~~~~~~~~

.. FunctionSection

.. _doxid-angle__generation_8hpp_1aa830403f3760a6624e3ce426aa09ed35:
.. _cid-angle_generation:

angle_generation
----------------


.. code-block:: cpp
	
	#include "apc/angle_generation.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void angle_generation (
	    volatile int& period,
	    volatile int& increment,
	    hls::stream <WIDTH_DATA>& output_stream
	    )

angle_generation_inst artificial angle generation to spin the motor in open loop



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - period

        - Number of clock cycles which interleaves between an angle increment and another

    *
        - increment

        - Increment of the angle (measure in CPR)

    *
        - output_stream

        - Stream with output result

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-clarke__direct_8hpp_1ae1cb1a29f05048f81078435c27c071aa:
.. _cid-clarke_direct:

Clarke_Direct
-------------


.. code-block:: cpp
	
	#include "apc/clarke_direct.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void Clarke_Direct (
	    hls::stream <T_FOC>& s_axis,
	    hls::stream <T_FOC>& m_axis,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out
	    )

Clarke_Direct Transform to map 3 phase rotating frame into 2 phase.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - m_axis

        - Formatted output data

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-clarke__inverse_8hpp_1a36e5901ad9fdc43412ada41d8d19b7b1:
.. _cid-clarke_inverse:

Clarke_Inverse
--------------


.. code-block:: cpp
	
	#include "apc/clarke_inverse.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void Clarke_Inverse (
	    hls::stream <T_FOC>& s_axis,
	    hls::stream <T_FOC>& m_axis,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out
	    )

Clarke_Inverse Transform to map 2 phase frame into 3 phase.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - m_axis

        - Formatted output data

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-demuxer__pi_8hpp_1ab446e53679510e2391ca6172d35cbd87:
.. _cid-demuxer_pi:

demuxer_pi
----------


.. code-block:: cpp
	
	#include "apc/demuxer_pi.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void demuxer_pi (
	    hls::stream <T_FOC>& s_axis,
	    hls::stream <WIDTH_DATA>& angle_gen,
	    hls::stream <WIDTH_DATA>& to_Iq_PI,
	    hls::stream <WIDTH_DATA>& to_Id_PI,
	    hls::stream <WIDTH_DATA>& to_RPM_PI,
	    hls::stream <WIDTH_DATA>& to_muxer,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out,
	    volatile int& control_mode,
	    volatile int& Id_,
	    volatile int& Iq_,
	    volatile int& theta_
	    )

demuxer_pi Dispatch synchronously data to the PIs



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - angle_gen

        - Angle generated from generator (used in open loop)

    *
        - to_Iq_PI

        - output torque to PI

    *
        - to_Id_PI

        - output flux to PI

    *
        - to_muxer

        - output angle to PI

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-filters_8hpp_1af004b498ba502f5f645843c173154827:
.. _cid-ps_iir_filter:

ps_iir_filter
-------------


.. code-block:: cpp
	
	#include "apc/filters.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM,
	    typename T_ADC_WIDTH,
	    typename T_QEI_WIDTH
	    >
	void ps_iir_filter (
	    hls::stream <T_ADC_WIDTH>& Ia,
	    hls::stream <T_ADC_WIDTH>& Ib,
	    hls::stream <T_ADC_WIDTH>& Ic,
	    hls::stream <T_QEI_WIDTH>& SPEED_THETA_m,
	    hls::stream <T_FOC>& output_stream,
	    hls::stream <T_STREAM_LOG>& logger_stream,
	    int32_t& filt_a,
	    int32_t& filt_b,
	    int32_t& angle_shift
	    )

ps_iir_filter Data patcher and filter stage before FOC



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - output_stream

        - Formatted output data

    *
        - Ia

        - A phase current measured from ADC

    *
        - Ib

        - B phase current measured from ADC

    *
        - Ic

        - C phase current measured from ADC

    *
        - SPEED_THETA_m

        - output packet from QEI interface

    *
        - logger_stream

        - Formatted output data of the logger

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

    *
        - T_ADC_WIDTH

        - width of the variable from ADC (24 bits, if change please change the Vivado design as well)

    *
        - T_QEI_WIDTH

        - width of the stream from QEI

.. _doxid-muxer__pi_8hpp_1ae23b9cd7c01050537d310f1593c7226e:
.. _cid-muxer_pi:

muxer_pi
--------


.. code-block:: cpp
	
	#include "apc/muxer_pi.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void muxer_pi (
	    hls::stream <WIDTH_DATA>& from_torque,
	    hls::stream <WIDTH_DATA>& from_flux,
	    hls::stream <WIDTH_DATA>& from_demux,
	    hls::stream <WIDTH_DATA>& from_gen,
	    hls::stream <T_FOC>& m_axis,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out,
	    volatile int& control_mode,
	    volatile int& Vd_ps,
	    volatile int& Vq_ps
	    )

muxer_pi Patch synchronously data from the PIs



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - m_axis

        - Formatted output data

    *
        - from_gen

        - Angle generated from generator (used in open loop)

    *
        - from_torque

        - output torque from PI

    *
        - from_flux

        - output flux from PI

    *
        - from_demux

        - output angle from demuxer

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-park__direct_8hpp_1ab1265c9090b7cf144d9c97a019907ac6:
.. _cid-park_direct:

Park_Direct
-----------


.. code-block:: cpp
	
	#include "apc/park_direct.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void Park_Direct (
	    hls::stream <T_FOC>& s_axis,
	    hls::stream <T_FOC>& m_axis,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out
	    )

Park_Direct Transform to map 2 phase rotating frame into 2 phase fixed frame.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - m_axis

        - Formatted output data

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-park__inverse_8hpp_1a0adfd0daf1a4e38d8cac60471aeb4693:
.. _cid-park_inverse:

Park_Inverse
------------


.. code-block:: cpp
	
	#include "apc/park_inverse.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void Park_Inverse (
	    hls::stream <T_FOC>& s_axis,
	    hls::stream <T_FOC>& m_axis,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out
	    )

Park_Inverse Transform to map 2 phase fixed frame into 2 phase rotating frame.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - m_axis

        - Formatted output data

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-pi__control_8hpp_1a19d5075391b33e5c116e2f55ce689409:
.. _cid-pi_control:

PI_Control
----------


.. code-block:: cpp
	
	#include "apc/pi_control.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void PI_Control (
	    hls::stream <WIDTH_DATA>& s_axis,
	    hls::stream <WIDTH_DATA>& m_axis,
	    WIDTH_DATA Sp,
	    WIDTH_DATA Kp,
	    WIDTH_DATA Ki,
	    WIDTH_DATA mode
	    )

PI_Control Proportional and Integrative Control.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - m_axis

        - Formatted output data

    *
        - Sp

        - Setpoint of the controller

    *
        - Kp

        - Gain of proportional

    *
        - Ki

        - Gain of Integrative

    *
        - mode

        - mode of control, used to reset in case of change

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-pi__control_8hpp_1ae6dc34e1e142fd0122a1936ae1812149:
.. _cid-pi_control_stream:

PI_Control_stream
-----------------


.. code-block:: cpp
	
	#include "apc/pi_control.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void PI_Control_stream (
	    hls::stream <WIDTH_DATA>& s_axis,
	    hls::stream <WIDTH_DATA>& s_axis_2,
	    hls::stream <WIDTH_DATA>& m_axis,
	    WIDTH_DATA Sp,
	    WIDTH_DATA Kp,
	    WIDTH_DATA Ki,
	    WIDTH_DATA mode
	    )

PI_Control Proportional and Integrative Control.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data for mode MOD_TORQUE_WITHOUT_SPEED

    *
        - s_axis_2

        - Formatted Input data for other modes

    *
        - m_axis

        - Formatted output data

    *
        - Sp

        - Setpoint of the controller

    *
        - Kp

        - Gain of proportional

    *
        - Ki

        - Gain of Integrative

    *
        - mode

        - mode of control, used to reset in case of change

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-voltage__modulation_8hpp_1adb02fd304a49a21af7dee1c6c7dedf03:
.. _cid-voltage_modulation:

voltage_modulation
------------------


.. code-block:: cpp
	
	#include "apc/voltage_modulation.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM,
	    typename PWM_DATA_TYPE
	    >
	void voltage_modulation (
	    hls::stream <T_FOC>& s_axis,
	    hls::stream <PWM_DATA_TYPE>& Va_out,
	    hls::stream <PWM_DATA_TYPE>& Vb_out,
	    hls::stream <PWM_DATA_TYPE>& Vc_out,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out
	    )

voltage_modulation Voltage modulation to the DC tension



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - m_axis

        - Formatted output data

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - Va_out

        - Value of A phase

    *
        - Vb_out

        - Value of B phase

    *
        - Vc_out

        - Value of C phase

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

.. _doxid-apc_2svpwm_8hpp_1a1753a0343587277bdbd2bbee305d3048:
.. _cid-svpwm:

SVPWM
-----


.. code-block:: cpp
	
	#include "apc/svpwm.hpp"



.. ref-code-block:: cpp
	:class: title-code-block

	template <
	    typename T_FOC,
	    typename T_STREAM_LOG,
	    typename WIDTH_DATA,
	    typename WIDTH_ACCUM
	    >
	void SVPWM (
	    hls::stream <T_FOC>& s_axis,
	    hls::stream <T_FOC>& m_axis,
	    hls::stream <T_STREAM_LOG>& logger_stream_in,
	    hls::stream <T_STREAM_LOG>& logger_stream_out,
	    volatile int& mode_,
	    volatile int& phase_a_,
	    volatile int& phase_b_,
	    volatile int& phase_c_
	    )

SVPWM Modulate the voltages obtained through FOC.



.. rubric:: Parameters:

.. list-table::
    :widths: 20 80

    *
        - s_axis

        - Formatted Input data

    *
        - m_axis

        - Formatted output data

    *
        - logger_stream_in

        - Formatted input data of the logger

    *
        - logger_stream_out

        - Formatted output data of the logger

    *
        - mode_

        - Set mode of control

    *
        - phase_a_

        - Value of A phase in case of manual set

    *
        - phase_b_

        - Value of B phase in case of manual set

    *
        - phase_c_

        - Value of C phase in case of manual set

    *
        - T_FOC

        - data width of the streaming connection with execution data

    *
        - T_STREAM_LOG

        - data width of the streaming connection with log data

    *
        - WIDTH_DATA

        - width of the single variable

    *
        - WIDTH_ACCUM

        - width of the accumulator resulting from multiplication operation

Macros
------

.. _doxid-common__vars_8hpp_1afea2bed9d9fdec4cb710693e6fe2060c:
.. _cid-comm_macro_cpr:
.. ref-code-block:: cpp
	:class: title-code-block

	#define COMM_MACRO_CPR

Number of encoder steps per one full revolution.

.. _doxid-common__vars_8hpp_1a74e343e95f535123648c24acce8c1ecc:
.. _cid-max_val_pwm:
.. ref-code-block:: cpp
	:class: title-code-block

	#define MAX_VAL_PWM

Max value of the PWM voltage, 6~10kV.

.. _doxid-common__vars_8hpp_1ac9837ef28b444d636035dd6e684f07ae:
.. _cid-pwm_ap_fixed_para_i2:
.. ref-code-block:: cpp
	:class: title-code-block

	#define PWM_AP_FIXED_PARA_I2

I parameter, number of bits used to represent the integer value for ap_fixed version.

.. _doxid-common__vars_8hpp_1a633b3f95d557018833d547eddc48b615:
.. _cid-pwm_ap_fixed_para_w2:
.. ref-code-block:: cpp
	:class: title-code-block

	#define PWM_AP_FIXED_PARA_W2

W parameter, word length in bits for ap_fixed version, more details to ug1399.

.. _doxid-qei_8hpp_1a8696e15e85e4dbab2869458a235b2b19:
.. _cid-qei_max_no_edge_cycle:
.. ref-code-block:: cpp
	:class: title-code-block

	#define QEI_MAX_NO_EDGE_CYCLE

Constant values.

