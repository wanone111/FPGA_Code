


<!DOCTYPE HTML>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
	<head>
		<meta charset="utf-8">
		
		<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
		<link rel="stylesheet" href="https://static.cloud.coveo.com/searchui/v2.4382/css/CoveoFullSearch.css"/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<meta name="description"/>
		<meta name="keywords"/>
		<meta property="og:title" content=""/>
		<meta property="og:description"/>
		<!-- favicon -->
		<link rel="icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<link rel="shortcut icon" type="image/vnd.microsoft.icon" href="_static/favicon.ico"/>
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet" type="text/css"/>

	<!-- OneTrust Cookies Consent Notice start for xilinx.github.io -->
<script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" data-document-language="true" type="text/javascript" charset="UTF-8" data-domain-script="37701bd4-e5c0-4ee3-9329-e7475d0b13a7" ></script>
<script type="text/javascript">
function OptanonWrapper() { }
</script>
<!-- OneTrust Cookies Consent Notice end for xilinx.github.io -->
		<!-- Google Tag Manager -->
	<script type="text/plain" class="optanon-category-C0002">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
	new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
	j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
	'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
	})(window,document,'script','dataLayer','GTM-5RHQV7');</script>
	<!-- End Google Tag Manager -->
	
        <!-- Google Tag Manager -->
        <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-5RHQV7" height="0" width="0" style="display:none;visibility:hidden" class="optanon-category-C0002"></iframe></noscript>
        <!-- End Google Tag Manager -->	

  
  
  
  

  
      <script type="text/javascript" src="_static/js/jquery.min.js"></script>
	  <script type="text/javascript" src="_static/js/gtm.js"></script>
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
    <script type="text/javascript" src="_static/js/d3dd8c60ed.js"></script>
    <script type="text/javascript" src="_static/js/common-ui-all.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="_static/js/CoveoJsSearch.Lazy.min.js"></script>
    <script type="text/javascript" src="_static/js/linkid.js"></script>
    <script type="text/javascript" src="_static/js/Searchbox.min.js"></script>
    <script type="text/javascript" src="_static/js/header-footer.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/common-ui-all.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/header-footer.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/pro.min.css" media="all" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
	</head>
	<body>
		<div class="xilinx-bs3"/>
		<div class="root responsivegrid">
			<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 aem-Grid--large--16 aem-Grid--xlarge--16 aem-Grid--xxlarge--16 aem-Grid--xxxlarge--16 ">
 <div class="xilinxExperienceFragments experiencefragment aem-GridColumn aem-GridColumn--default--12">

    
    

    



<div class="xf-content-height">
    

<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
    
    <div class="header parbase aem-GridColumn aem-GridColumn--default--12"><noindex>
	<header data-component="header" class="site-header">
		<nav class="navbar navbar-default">
			<div class="container-fluid main-nav">
				<div class="row">
					<div class="navbar-column col-xs-4 col-sm-5">
						<ul class="nav navbar-nav hidden-xs">
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
								</li>
							<li>
									<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
								</li>
							</ul>
							
						<ul class="nav navbar-nav hidden-sm hidden-md hidden-lg">
							<li>
									<button data-target="#header-container-0" data-function="toggle">Solutions</button>
								</li>
							<li>
									<button data-target="#header-container-1" data-function="toggle">Products</button>
								</li>
							<li>
									<button data-target="#header-container-2" data-function="toggle">Company</button>
								</li>
							</ul>
							
						<div id="header-container-0" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-1" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							<div id="header-container-2" class="menu-container">
								<div class="navbar-nav-container">
									<ul class="nav navbar-nav">
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/applications.html&#39;;">Solutions</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/products/silicon-devices.html&#39;;">Products</button>
												</li>
										<li>
												<button onclick="window.location.href=&#39;https://www.xilinx.com/about/company-overview.html&#39;;">Company</button>
												</li>
										</ul>
									<button data-function="close-menu">
										<span class="fal fa-times" aria-hidden="true"></span>
									</button>
								</div>
							</div>
							</div>
					<div class="logo-column col-xs-4 col-sm-2">
						<div class="logo">
							<a target="_blank" href="https://www.xilinx.com/">
								<img src="https://github.com/Xilinx/Image-Collateral/blob/main/xilinx-header-logo.svg?raw=true" title="Xilinx Inc"/>
							</a>
						</div>
					</div>

				</div>
			</div>
			</nav></header></noindex></div>
		
	
</div>

    
</div>
</div>

<div class="calloutBanner parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><div class="callout-banner">
    Xilinx is now a part of <a target="_blank" href="https://www.amd.com/en/corporate/xilinx-acquisition">AMD</a> |  <a target="_blank" href="https://www.amd.com/en/corporate/privacy">Learn More</a>
</div>
</div>
				<div class="parsys aem-GridColumn--xxxlarge--none aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
						<div class="container-fluid">
							<div class="row">
							<div class="col-xs-12">
   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> Vitis Vision Library
          

          
          </a>

          
            
            
              <div class="version">
                2024.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

      
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
            
            
            
              
            
            
              <p class="caption"><span class="caption-text">Vitis Vision Library User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#getting-started-with-vitis-vision">Getting Started with Vitis Vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#using-the-vitis-vision-library">Using the Vitis Vision Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#getting-started-with-hls">Getting Started with HLS</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#migrating-the-hls-video-library-to-vitis-vision">Migrating the HLS Video Library to Vitis vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#design-examples-using-the-vitis-vision-library">Design Examples Using the Vitis Vision Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#id7">Defect Detection Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#isp-all-in-one-adas-pipeline">ISP all_in_one_adas Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html#isp-all-in-one-pipeline">ISP all_in_one Pipeline:</a></li>
</ul>
<p class="caption"><span class="caption-text">Vitis Vision AIE Library User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview-aie.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview-aie.html#getting-started-with-vitis-vision-aie">Getting Started with Vitis Vision AIE</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview-aie.html#vitis-aie-design-methodology">Vitis AIE Design Methodology</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview-aie.html#evaluating-the-functionality">Evaluating the Functionality</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview-aie.html#design-example-using-vitis-vision-aie-library">Design example Using Vitis Vision AIE Library</a></li>
</ul>
<p class="caption"><span class="caption-text">Vitis Vision Library API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html#vitis-vision-library-functions">Vitis Vision Library Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html#id45">Degamma</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html#lens-shading-correction">Lens Shading Correction</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html#rgbir-to-standard-bayer-format">RGBIR  to Standard Bayer Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html#id83">Rotate</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-reference.html#tvl1-optical-flow">TVL1 Optical Flow</a></li>
</ul>
<p class="caption"><span class="caption-text">Vitis Vision AIE Library API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api-reference-aie.html">Vitis Vision AIE Library API Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">Benchmark</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Benchmark.html">Benchmark</a></li>
</ul>
<p class="caption"><span class="caption-text">Release Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="releasenotesxfopencv.html">Release Notes</a></li>
</ul>

            
			
			<p class="caption"><span class="caption-text">This Page</span></p>
				<ul class="current">
				  <li class="toctree-l1"><a href="_sources/tutorial.rst.txt"
						rel="nofollow">Show Source</a></li>
				</ul>
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Vitis Vision Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Getting Started with Vitis Vision Libraries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started-with-vitis-vision-libraries">
<h1>Getting Started with Vitis Vision Libraries<a class="headerlink" href="#getting-started-with-vitis-vision-libraries" title="Permalink to this headline">¶</a></h1>
<p>The Vitis vision library has been designed to work in the Vitis development environment, and provides a software
interface for computer vision functions accelerated on an FPGA device.
Vitis vision library functions are mostly similar in functionality to their
OpenCV equivalent.</p>
<div class="section" id="get-vitis-libraries">
<h2>Get Vitis Libraries<a class="headerlink" href="#get-vitis-libraries" title="Permalink to this headline">¶</a></h2>
<p>First, clone the Vitis Libraries into local path.</p>
<p>The Vitis Library repo is located at this link:
<a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries">https://github.com/Xilinx/Vitis_Libraries</a>. Assuming you are using <code class="docutils literal notranslate"><span class="pre">$/home/project</span></code> as working directory, use following command to clone the Vitis Library repository into the working directory:</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span>
<span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">Xilinx</span><span class="o">/</span><span class="n">Vitis_Libraries</span><span class="o">.</span><span class="n">git</span>
</pre></div>
</div>
<p>This might take a few minutes to download, depending on network speed.
After it is downloaded, browse into the sub folders to get familiar with the file structure.</p>
<p>Vitis_Libraries/</p>
<p>├── Jenkinsfile</p>
<p>├── LICENSE.txt</p>
<p>├── README.md</p>
<p>├── blas/</p>
<p>├── codec/</p>
<p>├── data_analytics/</p>
<p>├── data_compression/</p>
<p>├── database/</p>
<p>├── dsp/</p>
<p>├── graph/</p>
<p>├── hpc/</p>
<p>├── quantitative_finance/</p>
<p>├── security/</p>
<p>├── solver/</p>
<p>├── sparse/</p>
<p>├── utils/</p>
<p>└── vision/</p>
<p>There are many different categories of libraries under the top-level folder. In this lab, you will use the <strong>vision</strong> library. So, enter the sub-directory <strong>vision</strong>, and you will find following directory structure.</p>
<p>vision/</p>
<p>├── Jenkinsfile</p>
<p>├── L1/</p>
<p>│   ├── README.md</p>
<p>│   ├── examples/</p>
<p>│   ├── include/</p>
<p>│   ├── lib/</p>
<p>│   └── tests/</p>
<p>├── L2/</p>
<p>│   ├── README.md</p>
<p>│   ├── examples/</p>
<p>│   └── tests/</p>
<p>├── L3/</p>
<p>│   ├── README.md</p>
<p>│   ├── benchmarks/</p>
<p>│   ├── examples/</p>
<p>│   └── tests/</p>
<p>├── data/</p>
<p>├── LICENSE.txt</p>
<p>├── README.md</p>
<p>├── docs/</p>
<p>│   ├── images/</p>
<p>│   ├── include/</p>
<p>│   ├── Makefile</p>
<p>│   ├── Makefile.sphinx</p>
<p>│   ├── rst files</p>
<p>│   ├── conf.py</p>
<p>│   ├── conf_bhp.py</p>
<p>│   ├── env.csh</p>
<p>├── ext/</p>
<p>│   ├── make_utility/</p>
<p>│   └── xcl2/</p>
<p>└── library.json</p>
<p>This library is written in C++ and it contains three levels of abstraction:</p>
<p><strong>L1</strong>: Examples that evaluate the Vitis Vision kernels and demonstrate the kernels’ use model in HLS flow.</p>
<p><strong>L2</strong>: Examples that evaluate the Vitis Vision kernels and demonstrate the kernels’ use model in Vitis flow.</p>
<p><strong>L3</strong>: Applications formed by stitching a pipeline of Vitis Vision functions.</p>
<p>In the first section, this tutorial focuses on how to leverage the Vitis Vision Libraries to build your own design. The tutorial will use L1 library <em>custom convolution</em> as an example.</p>
<p>L1 functions are targeted for Vitis HLS flow, where C-Simulation, Synthesis, Co-Simulation and RTL implementation can be performed.</p>
<p>OpenCV-4.4.0 x86 version libs need to be installed beforehand. Refer to this <a class="reference external" href="https://support.xilinx.com/s/article/Vitis-Libraries-Compiling-and-Installing-OpenCV?language=en_US">page</a> for details on installation.</p>
<p>This section contains instructions for cloning the library, compiling, and simulating the top-level design.</p>
<div class="section" id="before-you-begin">
<h3>Before You Begin<a class="headerlink" href="#before-you-begin" title="Permalink to this headline">¶</a></h3>
<div class="section" id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h4>
<ol class="arabic">
<li><p class="first">Valid installation of <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Installing-the-Vitis-Software-Platform">Vitis™ 2022.2</a> or later version and the corresponding licenses.</p>
</li>
<li><p class="first">Xilinx Runtime <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Installing-Xilinx-Runtime-and-Platforms">XRT</a> must be installed. XRT provides the software interface to AMD FPGAs.</p>
</li>
<li><p class="first">Install <a class="reference external" href="https://github.com/opencv/opencv/tree/4.4.0">OpenCV-4.4.0</a> x86 libraries (with compatible <code class="docutils literal notranslate"><span class="pre">libjpeg.so</span></code>). x86 libs have to be used for:</p>
<blockquote>
<div><blockquote>
<div><ol class="loweralpha simple">
<li>L1 flows, irrespective of the target FPGA device being PCIe or embedded.</li>
<li>L2/L3 flows when the target device is PCIe-based.</li>
<li>L2/L3 flows when performing software emulation for an embedded platform.</li>
</ol>
</div></blockquote>
<p>For L2/L3 flows targeting embedded platforms (for hardware emulations and hardware build), the aarch32/aarch64 version of OpenCV shipped with their <em>sysroot</em> should be used.</p>
</div></blockquote>
</li>
<li><p class="first">libOpenCL.so must be <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/OpenCL-Installable-Client-Driver-Loader">installed</a> if not already present.</p>
</li>
<li><p class="first"><a class="reference external" href="https://www.xilinx.com/support/documentation/boards_and_kits/accelerator-cards/1_9/ug1301-getting-started-guide-alveo-accelerator-cards.pdf">Install the card</a> for which the platform is supported in Vitis 2022.2 or later versions.</p>
</li>
<li><p class="first">If targeting an embedded platform, <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Installing-Embedded-Platforms?tocId=hfE7LFeS8mU4dexvgPL31Q">install</a> it and set up the <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/444006775/Zynq+UltraScale+MPSoC">evaluation board</a>.</p>
</li>
</ol>
</div>
<div class="section" id="set-up-the-environment">
<h4>Set up the Environment<a class="headerlink" href="#set-up-the-environment" title="Permalink to this headline">¶</a></h4>
<p>Before playing with the libraries, you need to set up Vitis environment. For instructions on how to set up the Vitis environment, refer to <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Setting-Up-the-Vitis-Environment">https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Setting-Up-the-Vitis-Environment</a>.</p>
<p>Below are the example scripts to configure environment settings for L1 functions:</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span>source &lt; path-to-Vitis-installation-directory &gt;/settings64.sh
source &lt; part-to-XRT-installation-directory &gt;/setup.sh
export PLATFORM=&lt; path-to-platform-directory &gt;/&lt; platform &gt;.xpfm
export OPENCV_INCLUDE=&lt; path-to-opencv-include-folder &gt;
export OPENCV_LIB=&lt; path-to-opencv-lib-folder &gt;
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:&lt; path-to-opencv-lib-folder &gt;
make run CSIM=&lt; 1/0 &gt; CSYNTH=&lt; 1/0 &gt; COSIM=&lt; 1/0 &gt; VIVADO_IMPL=&lt; 1/0 &gt;
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="running-the-tutorial">
<h2>Running the Tutorial<a class="headerlink" href="#running-the-tutorial" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-and-run-a-vitis-hls-project">
<h3>Create and run a Vitis HLS project<a class="headerlink" href="#create-and-run-a-vitis-hls-project" title="Permalink to this headline">¶</a></h3>
<p>In this step, you will create an HLS project by using the files provided in Vitis Library at this link: <a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries/tree/main/vision/L1/examples/customconv">https://github.com/Xilinx/Vitis_Libraries/tree/main/vision/L1/examples/customconv</a>.
The source files and script file are all located in this folder. It is assumed that you have cloned the Vitis Libraries into the <code class="docutils literal notranslate"><span class="pre">/home/project/Vitis_Libraries</span></code> directory.</p>
<ol class="arabic simple">
<li>Navigate to the <code class="docutils literal notranslate"><span class="pre">/home/project/Vitis_libraries/vision/L1/examples/customconv</span></code> folder and run the following command to create the HLS project.</li>
</ol>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">run</span> <span class="n">CSIM</span><span class="o">=</span><span class="mi">1</span> <span class="n">CSYNTH</span><span class="o">=</span><span class="mi">1</span> <span class="n">COSIM</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Executing this command will run through the project creation, C simulation, C synthesis, and Co-simulation flows. You can modify the parameter to skip certain steps. After
the execution, the console window will print out the verification results and show <strong>*PASS*</strong> at the end of simulation.</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">INFO</span><span class="p">:</span> <span class="n">Verification</span> <span class="n">results</span><span class="p">:</span>
<span class="n">Minimum</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">intensity</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">Maximum</span> <span class="n">error</span> <span class="ow">in</span> <span class="n">intensity</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">Percentage</span> <span class="n">of</span> <span class="n">pixels</span> <span class="n">above</span> <span class="n">error</span> <span class="n">threshold</span> <span class="o">=</span> <span class="mi">0</span>

<span class="n">INFO</span><span class="p">:</span> <span class="p">[</span><span class="n">COSIM</span> <span class="mi">212</span><span class="o">-</span><span class="mi">1000</span><span class="p">]</span> <span class="o">***</span> <span class="n">C</span><span class="o">/</span><span class="n">RTL</span> <span class="n">co</span><span class="o">-</span><span class="n">simulation</span> <span class="n">finished</span><span class="p">:</span> <span class="n">PASS</span> <span class="o">***</span>
</pre></div>
</div>
<p>Once your job is complete, the minimum error in intensity, maximum error in intensity, percentage of pixels above error threshold is displayed on screen. The testbench uses an image as input to the customconv and produces the kernel output image, the OpenCV reference image and a difference image, which are shown below:</p>
<p>Input image:</p>
<p><a class="image reference internal" href="_images/128x128.png"><img alt="in_img" class="image" src="_images/128x128.png" style="width: 1000px;" /></a></p>
<p>OpenCV Reference Image:</p>
<p><a class="image reference internal" href="_images/ref_img.jpg"><img alt="ref_img" class="image" src="_images/ref_img.jpg" style="width: 1000px;" /></a></p>
<p>HLS Output Image:</p>
<p><a class="image reference internal" href="_images/out_img.jpg"><img alt="out_img" class="image" src="_images/out_img.jpg" style="width: 1000px;" /></a></p>
<p>Difference Image:</p>
<p><a class="image reference internal" href="_images/diff_img.jpg"><img alt="diff_img" class="image" src="_images/diff_img.jpg" style="width: 1000px;" /></a></p>
<ol class="arabic simple" start="2">
<li>Now you will open the project in the Vitis HLS GUI. Navigate to <code class="docutils literal notranslate"><span class="pre">/home/project/Vitis_libraries/vision/L1/examples/customconv</span></code> and run the following command:</li>
</ol>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">vitis_hls</span> <span class="o">-</span><span class="n">p</span> <span class="n">customconv</span><span class="o">.</span><span class="n">prj</span> <span class="o">&amp;</span>
</pre></div>
</div>
<p>You can browse the source files, synthesis report, or waveform viewer by selecting them from the <em>Explorer</em> and <em>Flow Navigator</em> windows.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">xf_custom_convolution_tb.cpp</span></code> calls the <code class="docutils literal notranslate"><span class="pre">Filter2d</span></code> accel and the parameters are defined in the <code class="docutils literal notranslate"><span class="pre">xf_custom_convolution_config.h</span></code> and <code class="docutils literal notranslate"><span class="pre">xf_config_params.h</span></code> files. For detailed instructions about how to use <em>custom convolution</em>, refer to the github page at: <a class="reference external" href="https://docs.xilinx.com/r/en-US/Vitis_Libraries/vision/api-reference.html#custom-convolution">https://docs.xilinx.com/r/en-US/Vitis_Libraries/vision/api-reference.html#custom-convolution</a>.</p>
<ol class="arabic simple" start="3">
<li>Export IP in HLS project</li>
</ol>
<p>Now you have verified that the library IP is working properly, you will export it to a Vivado IP. To do so, click <strong>Export RTL</strong> from the <strong>IMPLEMENTATION</strong> item in <strong>Flow Navigator</strong>. In the pop-up window, leave every settings unchanged and click <strong>OK</strong> to export the IP.
By default, the IP will be exported to  <code class="docutils literal notranslate"><span class="pre">&lt;project</span> <span class="pre">folder&gt;/solN/impl</span></code>; in this case it is in following directory:</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">project</span><span class="o">/</span><span class="n">Vitis_Libraries</span><span class="o">/</span><span class="n">vision</span><span class="o">/</span><span class="n">L1</span><span class="o">/</span><span class="n">examples</span><span class="o">/</span><span class="n">customconv</span><span class="o">/</span><span class="n">customconv</span><span class="o">.</span><span class="n">prj</span><span class="o">/</span><span class="n">sol1</span><span class="o">/</span><span class="n">impl</span>
</pre></div>
</div>
<p>However, you may customize the path in the export pop-up menu.</p>
<ol class="arabic simple" start="4">
<li>View Co-Simulation Waveform</li>
</ol>
<p>You can either modify the co-simulation related command lines in the file <code class="docutils literal notranslate"><span class="pre">./run_hls.tcl</span></code> (around line 46) as below to turn-on the xsim waveform dump switch:</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span>if {$COSIM == 1} {
        cosim_design -wave_debug &lt;other existing flags&gt;
}
</pre></div>
</div>
<p>Then re-run the command:</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">run</span> <span class="n">COSIM</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<p>Or</p>
<p>You can also perform this operation in the GUI, by clicking <strong>Run Co-Simulation</strong> in the <strong>Flow Navigator</strong> and selecting the <strong>Wave debug</strong> option. In this way you get the simulation waveform, as shown in following example image:</p>
<p><a class="image reference internal" href="_images/cosim_wave.PNG"><img alt="cosim" class="image" src="_images/cosim_wave.PNG" style="width: 1000px;" /></a></p>
<ol class="arabic simple" start="5">
<li>Implement the top-level project</li>
</ol>
<p>Click <strong>Run Implementation</strong> from the <strong>Flow Navigator</strong> panel and click <strong>OK</strong> in the pop-up window. This will run through the Vivado synthesis and implementation flow which will generate both timing and resource reports for this IP.</p>
</div>
</div>
<div class="section" id="create-and-run-a-vitis-project">
<h2>Create and Run a Vitis Project<a class="headerlink" href="#create-and-run-a-vitis-project" title="Permalink to this headline">¶</a></h2>
<p>In this section, you will create a Vitis project using an L2 example.
L2/L3 functions are targeted for Vitis flows where software-emulation, hardware-emulation, and hardware build (to generate FPGA binaries) can be performed.
OpenCL is used in the testbench for calling the accelerator in L2/L3.</p>
<p>You will use the files provided in the Vitis Library at this link: <a class="reference external" href="https://github.com/Xilinx/Vitis_Libraries/tree/main/vision/L2/examples/customconv">https://github.com/Xilinx/Vitis_Libraries/tree/main/vision/L2/examples/customconv</a>.
The source files and script file are all located under this folder. It is assumed that you have cloned the Vitis Libraries into the <code class="docutils literal notranslate"><span class="pre">/home/project/Vitis_Libraries</span></code> directory.</p>
<p>Navigate to <code class="docutils literal notranslate"><span class="pre">/home/project/Vitis_libraries/vision/L2/examples/customconv</span></code> and run the following command to create the Vitis project for a DC platform like U200.</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">run</span> <span class="n">TARGET</span><span class="o">=</span><span class="n">sw_emu</span>
</pre></div>
</div>
<p>Here, <cite>TARGET</cite> decides the FPGA binary type:</p>
<ul class="simple">
<li><cite>sw_emu</cite> is for software emulation</li>
<li><cite>hw_emu</cite> is for hardware emulation</li>
<li><cite>hw</cite> is for deployment on physical card. (Compilation to hardware binary often takes hours.)</li>
</ul>
<p><strong>Note</strong> : For embedded devices, platforms and common images have to downloaded separately from the
AMD official <a class="reference external" href="https://www.xilinx.com/support/download/index.html/content/xilinx/en/downloadNav/embedded-platforms.html">download center</a></p>
<ul class="simple">
<li>If targeting an embedded platform, <a class="reference external" href="https://docs.xilinx.com/r/en-US/ug1393-vitis-application-acceleration/Installing-Embedded-Platforms?tocId=hfE7LFeS8mU4dexvgPL31Q">install</a>  it and set up the <a class="reference external" href="https://xilinx-wiki.atlassian.net/wiki/spaces/A/pages/444006775/Zynq+UltraScale+MPSoC">evaluation board</a></li>
</ul>
<p>For an embedded device like ZCU102, the command would be</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">run</span> <span class="n">TARGET</span><span class="o">=</span><span class="n">sw_emu</span>
</pre></div>
</div>
<p>Besides <code class="docutils literal notranslate"><span class="pre">run</span></code>, the Vitis case makefile also allows <code class="docutils literal notranslate"><span class="pre">host</span></code> and <code class="docutils literal notranslate"><span class="pre">xclbin</span></code> as build targets.
At the end of the flow, the console window will print out the verification results and show <strong>Test Passed …. !!!</strong> at the end of simulation. The output image is saved in the working directory.</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span>INFO: Verification results:
Minimum error in intensity = 0
Maximum error in intensity = 1
Percentage of pixels above error threshold = 0

Test Passed .... !!!
</pre></div>
</div>
<p>Running L3 examples is the same as L2. The difference between L2 and L3 in the Vitis Vision library is that the former generally calls a single kernel in the accelerator, whereas the latter has multiple kernels called in
a pipeline fashion to form a definite end application. Below is an example L3 application formed by stitching multiple kernels in Dataflow.</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">color_detect</span><span class="p">(</span><span class="n">ap_uint</span><span class="o">&lt;</span><span class="n">PTR_IN_WIDTH</span><span class="o">&gt;*</span> <span class="n">img_in</span><span class="p">,</span>
      <span class="n">unsigned</span> <span class="n">char</span><span class="o">*</span> <span class="n">low_thresh</span><span class="p">,</span>
      <span class="n">unsigned</span> <span class="n">char</span><span class="o">*</span> <span class="n">high_thresh</span><span class="p">,</span>
      <span class="n">unsigned</span> <span class="n">char</span><span class="o">*</span> <span class="n">process_shape</span><span class="p">,</span>
      <span class="n">ap_uint</span><span class="o">&lt;</span><span class="n">PTR_OUT_WIDTH</span><span class="o">&gt;*</span> <span class="n">img_out</span><span class="p">,</span>
      <span class="nb">int</span> <span class="n">rows</span><span class="p">,</span>
      <span class="nb">int</span> <span class="n">cols</span><span class="p">)</span> <span class="p">{</span>

 <span class="c1">#pragma HLS INTERFACE m_axi      port=img_in        offset=slave  bundle=gmem0</span>
 <span class="c1">#pragma HLS INTERFACE m_axi      port=low_thresh    offset=slave  bundle=gmem1</span>
 <span class="c1">#pragma HLS INTERFACE s_axilite  port=low_thresh</span>
 <span class="c1">#pragma HLS INTERFACE m_axi      port=high_thresh   offset=slave  bundle=gmem2</span>
 <span class="c1">#pragma HLS INTERFACE s_axilite  port=high_thresh</span>
 <span class="c1">#pragma HLS INTERFACE s_axilite  port=rows</span>
 <span class="c1">#pragma HLS INTERFACE s_axilite  port=cols</span>
 <span class="c1">#pragma HLS INTERFACE m_axi      port=process_shape offset=slave  bundle=gmem3</span>
 <span class="c1">#pragma HLS INTERFACE s_axilite  port=process_shape</span>
 <span class="c1">#pragma HLS INTERFACE m_axi      port=img_out       offset=slave  bundle=gmem4</span>
 <span class="c1">#pragma HLS INTERFACE s_axilite  port=return</span>

 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span><span class="o">&lt;</span><span class="n">IN_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="p">,</span> <span class="n">XF_CV_DEPTH_IN_1</span><span class="o">&gt;</span> <span class="n">imgInput</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span><span class="o">&lt;</span><span class="n">IN_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="p">,</span> <span class="n">XF_CV_DEPTH_RGB2HSV</span><span class="o">&gt;</span> <span class="n">rgb2hsv</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span><span class="o">&lt;</span><span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="p">,</span> <span class="n">XF_CV_DEPTH_HELP_1</span><span class="o">&gt;</span> <span class="n">imgHelper1</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span><span class="o">&lt;</span><span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="p">,</span> <span class="n">XF_CV_DEPTH_HELP_2</span><span class="o">&gt;</span> <span class="n">imgHelper2</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span><span class="o">&lt;</span><span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="p">,</span> <span class="n">XF_CV_DEPTH_HELP_3</span><span class="o">&gt;</span> <span class="n">imgHelper3</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span><span class="o">&lt;</span><span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="p">,</span> <span class="n">XF_CV_DEPTH_HELP_4</span><span class="o">&gt;</span> <span class="n">imgHelper4</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span><span class="o">&lt;</span><span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="p">,</span> <span class="n">XF_CV_DEPTH_OUT_1</span><span class="o">&gt;</span> <span class="n">imgOutput</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">);</span>

 <span class="o">//</span> <span class="n">Copy</span> <span class="n">the</span> <span class="n">shape</span> <span class="n">data</span><span class="p">:</span>
 <span class="n">unsigned</span> <span class="n">char</span> <span class="n">_kernel</span><span class="p">[</span><span class="n">FILTER_SIZE</span> <span class="o">*</span> <span class="n">FILTER_SIZE</span><span class="p">];</span>
 <span class="k">for</span> <span class="p">(</span><span class="n">unsigned</span> <span class="nb">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">FILTER_SIZE</span> <span class="o">*</span> <span class="n">FILTER_SIZE</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">#pragma HLS PIPELINE</span>
  <span class="n">_kernel</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">process_shape</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
 <span class="p">}</span>

 <span class="c1">#pragma HLS DATAFLOW</span>

 <span class="o">//</span> <span class="n">Retrieve</span> <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span> <span class="n">objects</span> <span class="kn">from</span> <span class="nn">img_in</span> <span class="n">data</span><span class="p">:</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Array2xfMat</span><span class="o">&lt;</span><span class="n">PTR_IN_WIDTH</span><span class="p">,</span> <span class="n">IN_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">img_in</span><span class="p">,</span> <span class="n">imgInput</span><span class="p">);</span>

 <span class="o">//</span> <span class="n">Convert</span> <span class="n">RGBA</span> <span class="n">to</span> <span class="n">HSV</span><span class="p">:</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">bgr2hsv</span><span class="o">&lt;</span><span class="n">IN_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">imgInput</span><span class="p">,</span> <span class="n">rgb2hsv</span><span class="p">);</span>

 <span class="o">//</span> <span class="n">Do</span> <span class="n">the</span> <span class="n">color</span> <span class="n">thresholding</span><span class="p">:</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">colorthresholding</span><span class="o">&lt;</span><span class="n">IN_TYPE</span><span class="p">,</span> <span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">MAXCOLORS</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">rgb2hsv</span><span class="p">,</span> <span class="n">imgHelper1</span><span class="p">,</span> <span class="n">low_thresh</span><span class="p">,</span>
                     <span class="n">high_thresh</span><span class="p">);</span>

 <span class="o">//</span> <span class="n">Use</span> <span class="n">erode</span> <span class="ow">and</span> <span class="n">dilate</span> <span class="n">to</span> <span class="n">fully</span> <span class="n">mark</span> <span class="n">color</span> <span class="n">areas</span><span class="p">:</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">erode</span><span class="o">&lt;</span><span class="n">XF_BORDER_CONSTANT</span><span class="p">,</span> <span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">XF_KERNEL_SHAPE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">ITERATIONS</span><span class="p">,</span>
      <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">imgHelper1</span><span class="p">,</span> <span class="n">imgHelper2</span><span class="p">,</span> <span class="n">_kernel</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">dilate</span><span class="o">&lt;</span><span class="n">XF_BORDER_CONSTANT</span><span class="p">,</span> <span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">XF_KERNEL_SHAPE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">ITERATIONS</span><span class="p">,</span>
       <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">imgHelper2</span><span class="p">,</span> <span class="n">imgHelper3</span><span class="p">,</span> <span class="n">_kernel</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">dilate</span><span class="o">&lt;</span><span class="n">XF_BORDER_CONSTANT</span><span class="p">,</span> <span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">XF_KERNEL_SHAPE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">ITERATIONS</span><span class="p">,</span>
       <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">imgHelper3</span><span class="p">,</span> <span class="n">imgHelper4</span><span class="p">,</span> <span class="n">_kernel</span><span class="p">);</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">erode</span><span class="o">&lt;</span><span class="n">XF_BORDER_CONSTANT</span><span class="p">,</span> <span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">XF_KERNEL_SHAPE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">FILTER_SIZE</span><span class="p">,</span> <span class="n">ITERATIONS</span><span class="p">,</span>
      <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">imgHelper4</span><span class="p">,</span> <span class="n">imgOutput</span><span class="p">,</span> <span class="n">_kernel</span><span class="p">);</span>

 <span class="o">//</span> <span class="n">Convert</span> <span class="n">_dst</span> <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">Mat</span> <span class="nb">object</span> <span class="n">to</span> <span class="n">output</span> <span class="n">array</span><span class="p">:</span>
 <span class="n">xf</span><span class="p">::</span><span class="n">cv</span><span class="p">::</span><span class="n">xfMat2Array</span><span class="o">&lt;</span><span class="n">PTR_OUT_WIDTH</span><span class="p">,</span> <span class="n">OUT_TYPE</span><span class="p">,</span> <span class="n">HEIGHT</span><span class="p">,</span> <span class="n">WIDTH</span><span class="p">,</span> <span class="n">NPC1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">imgOutput</span><span class="p">,</span> <span class="n">img_out</span><span class="p">);</span>

 <span class="k">return</span><span class="p">;</span>

<span class="p">}</span>
</pre></div>
</div>
<p>You can create custom applications similar to the above example by calling a set of desired kernels from the library.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This tutorial explained how to run L1 and L2 examples and leverage individual Vitis library kernels to build your own L3 model designs. The <em>custom convolution</em> example is selected for explanation for L1, L2, and <em>color detection</em> for L3.
You can follow similar flows when using other library elements.</p>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<p>Documentation on Vitis Libraries: <a class="reference external" href="https://docs.xilinx.com/r/en-US/Vitis_Libraries/index.html">https://docs.xilinx.com/r/en-US/Vitis_Libraries/index.html</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
<!-- Atalwar: Moved the footer code to layout.html to resolve conflict with the Xilinx template -->
</footer>

        </div>
      </div>


	  <!-- Sphinx Page Footer block -->
  

  <hr/>

  <div role="contentinfo" class="copyright">
    <p class="footerinfo">
      <span class="lastupdated">
        Last updated on May 28, 2024.
      </span>

    </p>
	<br>
  </div>
      </div>
    </section>


  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

   <script type="text/javascript">
    jQuery(function() { Search.loadIndex("searchindex.js"); });
  </script>

  <script type="text/javascript" id="searchindexloader"></script>


  
  
    
  



  <!--  Xilinx template footer block -->
							</div>
						</div>
					</div>
				</div>
				<div class="xilinxExperienceFragments experiencefragment aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
					<div class="xf-content-height">
						<div class="aem-Grid aem-Grid--16 aem-Grid--default--16 ">
							<div class="footer parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16">
								<noindex>
                  <!-- make footer fixed - NileshP -->
                  <style>
                        .footer {
                        position: fixed;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        }
                  </style>
                  <!-- make footer fixed NileshP-->
									<footer>
										<div class="aem-Grid aem-Grid--16">
											<div class="aem-GridColumn aem-GridColumn--xxxlarge--none aem-GridColumn--xsmall--16 aem-GridColumn--offset--xsmall--0 aem-GridColumn--xlarge--none aem-GridColumn--xxlarge--none aem-GridColumn--default--none aem-GridColumn--offset--large--1 aem-GridColumn--xlarge--12 aem-GridColumn--offset--default--0 aem-GridColumn--xxlarge--10 aem-GridColumn--offset--xlarge--2 aem-GridColumn--offset--xxlarge--3 aem-GridColumn--offset--xxxlarge--4 aem-GridColumn--xsmall--none aem-GridColumn--large--none aem-GridColumn aem-GridColumn--large--14 aem-GridColumn--xxxlarge--8 aem-GridColumn--default--16">
												<div class="container-fluid sub-footer">
													<div class="row">
														<div class="footerSocial parbase">
														
															<div class="col-md-push-6 col-lg-push-6 col-md-6 col-lg-6">
																<div class="lang-select dropup hidden-md hidden-lg">
		<button data-toggle="dropdown">
			<span class="fas fa-globe" aria-hidden="true"></span>
			<span>
				
					English
				</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
																<ul class="list-inline pull-right social-menu">
																	<li>
																		<a target="_blank" href="https://www.linkedin.com/company/xilinx">
																		<span class="linkedin icon"></span>
																		<span class="sr-only">Connect on LinkedIn</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.twitter.com/XilinxInc">
																		<span class="twitter icon"></span>
																		<span class="sr-only">Follow us on Twitter</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.facebook.com/XilinxInc">
																		<span class="facebook icon"></span>
																		<span class="sr-only">Connect on Facebook</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.youtube.com/XilinxInc">
																		<span class="youtube icon"></span>
																		<span class="sr-only">Watch us on YouTube</span>
																		</a>
																	</li>
																	<li>
																		<a target="_blank" href="https://www.xilinx.com/registration/subscriber-signup.html">
																		<span class="newsletter icon"></span>
																		<span class="sr-only">Subscribe to Newsletter</span>
																		</a>
																	</li>
																</ul>
																	<div class="lang-select dropup hidden-xs hidden-sm">
	<button data-toggle="dropdown">
		<span class="fas fa-globe" aria-hidden="true"></span>
		<span>
			
				English
			</span>
		<span class="far fa-angle-down" aria-hidden="true"></span>
	</button>
	<ul class="dropdown-menu">
		<li>
				<a target="_blank" href="https://japan.xilinx.com/" target="_self">
					日本語
				</a>
			</li>
		<li>
				<a target="_blank" href="https://china.xilinx.com/" target="_self">
					简体中文
				</a>
			</li>
		</ul>
	</div>
															</div>
														</div>
														<div class="col-md-pull-5 col-lg-pull-5 col-md-5 col-lg-5">
															<span class="copyright">©2022 Advanced Micro Devices, Inc</span>
														</div>

													</div>
													                    <div class="movethisrowtoleft row">
                        <div class="col-xs-24">
                            <ul class="sub-menu">
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/copyright">Terms and Conditions</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/privacy">Privacy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/cookies">Cookie Policy</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/trademarks">Trademarks</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/statement-human-trafficking-forced-labor.pdf">Statement on Forced Labor</a></li>
                                <li><a target="_blank" href="https://www.amd.com/en/corporate/competition">Fair and Open Competition</a></li>
                                <li><a target="_blank" href="https://www.amd.com/system/files/documents/amd-uk-tax-strategy.pdf">UK Tax Strategy</a></li>
								<li><a target="_blank" href="https://docs.xilinx.com/v/u/9x6YvZKuWyhJId7y7RQQKA">Inclusive Terminology</a></li>
                                <li><a href="#cookiessettings" class="ot-sdk-show-settings">Cookies Settings</a></li>
                            </ul>
                        </div>
                    </div>
												</div>
											</div>
										</div>
									</footer>
								</noindex>
							</div>
						</div>
					</div>
				</div>
<div class="backToTop parbase aem-GridColumn--default--none aem-GridColumn aem-GridColumn--offset--default--0 aem-GridColumn--default--16"><noindex>
    <span data-component="backToTopButton" class="backToTopButton loaded">
        <ul>
            <li>
                <a href="https://www.author.xilinx.com/xx/rebrand/amd/en-amd-xilinx-header-footer.html#top" class="btn top">
                    <span class="fas fa-angle-up" aria-hidden="true"></span>
                </a>
            </li>
        </ul>
    </span>
</noindex></div>
			</div>
		</div>


		<script>window.CQ = window.CQ || {}</script>
		<script src="https://static.cloud.coveo.com/searchui/v2.4382/js/CoveoJsSearch.Lazy.min.js"></script>
		<script>
			var underscoreSetup = function () {
			  _.templateSettings.interpolate = /\{\{=([^-][\S\s]+?)\}\}/g;
			  _.templateSettings.evaluate = /\{\{([^-=][\S\s]+?)\}\}/g;
			  _.templateSettings.escape = /\{\{-([^=][\S\s]+?)\}\}/g;
			}

			underscoreSetup();
		</script>
	</body>
</html>